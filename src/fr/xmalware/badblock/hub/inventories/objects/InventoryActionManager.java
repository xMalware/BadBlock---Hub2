package fr.xmalware.badblock.hub.inventories.objects;

import org.bukkit.inventory.Inventory;

import fr.badblock.gameapi.players.BadblockPlayer;
import fr.xmalware.badblock.hub.BadBlockHub;
import fr.xmalware.badblock.hub.inventories.BukkitInventories;

public class InventoryActionManager {

	public static void handle(BadblockPlayer player, InventoryItemObject object) {
		CustomItemAction action = object.getAction();
		if (action == null) {
			BadBlockHub.log("Â§cUnknown action set on this object.");
			return;
		}
		String actionData = object.getData_action();
		switch (action) {
			case OPEN_INV:
				openInventory(player, action, actionData);
				break;
			case CLOSE_INV:
				closeInventory(player, action, actionData);
				break;
			default:
			case NOTHING:
				break;
		}
	}

	private static void openInventory(BadblockPlayer player, CustomItemAction action, String actionData) {
		String inventoryName = actionData;
		Inventory inventory = BukkitInventories.getInventory(player, inventoryName);
		if (inventory == null) {
			closeInventory(player, action, null);
			return;
		}
		player.closeInventory(); // standby
		player.openInventory(inventory);
	}
	
	private static void closeInventory(BadblockPlayer player, CustomItemAction action, String actionData) {
		if (actionData != null && !actionData.isEmpty()) {
			// TODO: do another action ?
		}
		player.closeInventory();
	}
	
}
